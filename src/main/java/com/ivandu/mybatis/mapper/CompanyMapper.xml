<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ivandu.mybatis.mapper.CompanyMapper">
    <select id="selectCompanyAndStaffById" parameterType="Integer" resultMap="companyMap">
        select com.id, com.name, staff.id, staff.name, staff.age
        from company com left outer join staff on com.id = staff.id_com
        where com.id = #{id}
    </select>

    <resultMap id="companyMap" type="Company">
        <id property="id" column="id" />
        <result property="name" column="name" />
        <collection property="staffs" ofType="Staff" resultMap="staffsMap" />
    </resultMap>

    <resultMap id="staffsMap" type="Staff">
        <id property="id" column="id"/>
        <result property="name" column="name" />
        <result property="age" column="age" />
    </resultMap>
</mapper>